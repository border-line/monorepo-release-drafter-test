name: Release Drafter

on:
  pull_request:
    types: [closed]

jobs:
  update-test-project1-release-draft:
    permissions:
      # write permission is required to create a github release
      contents: write
    runs-on: ubuntu-latest
    if: github.event.pull_request.merged == true && github.base_ref == 'main' && contains(github.event.pull_request.labels.*.name, 'test-project1')
    steps:
      - name: Release drafter
        uses: release-drafter/release-drafter@v6
        with:
          config-name: release-drafter/release-drafter-test-project1.yml
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
  update-test-project2-release-draft:
    permissions:
      # write permission is required to create a github release
      contents: write
    runs-on: ubuntu-latest
    if: github.event.pull_request.merged == true && github.base_ref == 'main' && contains(github.event.pull_request.labels.*.name, 'test-project2')
    steps:
      - name: Release drafter
        uses: release-drafter/release-drafter@v6
        with:
          config-name: release-drafter/release-drafter-test-project2.yml
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
  update-test-project3-release-draft:
    permissions:
      # write permission is required to create a github release
      contents: write
    runs-on: ubuntu-latest
    if: github.event.pull_request.merged == true && github.base_ref == 'main' && contains(github.event.pull_request.labels.*.name, 'test-project3')
    steps:
      - name: Release drafter
        uses: release-drafter/release-drafter@v6
        with:
          config-name: release-drafter/release-drafter-test-project3.yml
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
